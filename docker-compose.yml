services:
  app:
    build: .
    ports:
      - "3000:3000"
    env_file:
      - .env
    volumes:
      # Obsidian vault (read/write) — adjust path
      - ${NOTES_PATH:-/path/to/obsidian/vault}:/data/notes
      # Code repos (read/write) — adjust path
      - ${REPOS_PATH:-/path/to/repos}:/data/repos
      # Claude Code config and MCP servers
      - ${CLAUDE_CONFIG:-~/.claude}:/root/.claude
    restart: unless-stopped
    # Use host network for access to local services (Nextcloud, Postgres)
    # Remove this and use explicit ports if you want more isolation
    network_mode: host
